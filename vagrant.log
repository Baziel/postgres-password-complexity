Script started on 2025-09-24 17:36:11+02:00 [TERM="xterm-256color" TTY="/dev/pts/0" COLUMNS="238" LINES="58"]
[0mBringing machine 'default' up with 'virtualbox' provider...[0m
[1m==> default: Importing base box 'rockylinux/10'...[0m
[0m[K[0m[0mProgress: 30%[0m[0m[K[0m[0mProgress: 60%[0m[0m[K[0m[0mProgress: 90%[0m[0m[K[0m[1m==> default: Matching MAC address for NAT networking...[0m
[1m==> default: Setting the name of the VM: server8[0m
[1m==> default: Fixed port collision for 22 => 2222. Now on port 2201.[0m
[1m==> default: Clearing any previously set network interfaces...[0m
[1m==> default: Preparing network interfaces based on configuration...[0m
[0m    default: Adapter 1: nat[0m
[0m    default: Adapter 2: bridged[0m
[1m==> default: Forwarding ports...[0m
[0m    default: 22 (guest) => 2201 (host) (adapter 1)[0m
[1m==> default: Running 'pre-boot' VM customizations...[0m
[1m==> default: Booting VM...[0m
[1m==> default: Waiting for machine to boot. This may take a few minutes...[0m
[0m    default: SSH address: 127.0.0.1:2201[0m
[0m    default: SSH username: vagrant[0m
[0m    default: SSH auth method: private key[0m
[1m==> default: Machine booted and ready![0m
[1m==> default: Checking for guest additions in VM...[0m
[0m    default: No guest additions were detected on the base box for this VM! Guest
    default: additions are required for forwarded ports, shared folders, host only
    default: networking, and more. If SSH fails on this machine, please install
    default: the guest additions and repackage the box to continue.
    default: 
    default: This is not an error message; everything may continue to work properly,
    default: in which case you may ignore this message.[0m
[1m==> default: Setting hostname...[0m
[1m==> default: Configuring and enabling network interfaces...[0m
[1m==> default: Rsyncing folder: /opt/VagrantMachines/pg17/ => /vagrant[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./systemctloverride => /tmp/systemctloverride[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./pg_hba.conf => /tmp/pg_hba.conf[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./postgres.sh => /tmp/postgres.sh[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./postgres2.sh => /tmp/postgres2.sh[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./postgresql.conf => /tmp/postgresql.conf[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./postgresql1.conf => /tmp/postgresql1.conf[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./postgresql2.conf => /tmp/postgresql2.conf[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./postgresql4.conf => /tmp/postgresql4.conf[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./testscript.sql => /tmp/testscript.sql[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./testscript1.sql => /tmp/testscript1.sql[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./testscript2.sql => /tmp/testscript2.sql[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./testscript3.sql => /tmp/testscript3.sql[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./testscript4.sql => /tmp/testscript4.sql[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./testscript4a.sql => /tmp/testscript4a.sql[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./testscript4.sh => /tmp/testscript4.sh[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./testscript5.sql => /tmp/testscript5.sql[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./testscript5.sh => /tmp/testscript5.sh[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./testscript6.sql => /tmp/testscript6.sql[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./testscript6.sh => /tmp/testscript6.sh[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./pci01_before.sql => /tmp/pci01_before.sql[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./pci01_behind.sql => /tmp/pci01_behind.sql[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./pci02_before.sql => /tmp/pci02_before.sql[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./pci02_behind.sql => /tmp/pci02_behind.sql[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./pci03_before.sql => /tmp/pci03_before.sql[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./pci03_behind.sql => /tmp/pci03_behind.sql[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./pci04_before.sql => /tmp/pci04_before.sql[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./pci04_behind.sql => /tmp/pci04_behind.sql[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./pci05_before.sql => /tmp/pci05_before.sql[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./pci05_behind.sql => /tmp/pci05_behind.sql[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./pci06_before.sql => /tmp/pci06_before.sql[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./pci06_behind.sql => /tmp/pci06_behind.sql[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./pci_password_check_rules_0.1.sql => /tmp/pci_password_check_rules_0.1.sql[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./pci_password_check_rules_0.2_up_0.1-0.2.sql => /tmp/pci_password_check_rules_0.2_up_0.1-0.2.sql[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./pci_password_check_rules_0.3_up_0.2-0.3.sql => /tmp/pci_password_check_rules_0.3_up_0.2-0.3.sql[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./pci_password_check_rules_0.4_up_0.3-0.4.sql => /tmp/pci_password_check_rules_0.4_up_0.3-0.4.sql[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./pci_password_check_rules_0.5_up_0.4-0.5.sql => /tmp/pci_password_check_rules_0.5_up_0.4-0.5.sql[0m
[1m==> default: Running provisioner: file...[0m
[0m    default: ./pci_password_check_rules_0.6_up_0.5-0.6.sql => /tmp/pci_password_check_rules_0.6_up_0.5-0.6.sql[0m
[1m==> default: Running provisioner: shell...[0m
[0m    default: Running: /tmp/vagrant-shell20250924-1373127-pvcpe7.sh[0m
[0;32m    default: START provisioning.sh[0m
[0;31m    default: useradd warning: postgres's uid 26 outside of the UID_MIN 1000 and UID_MAX 60000 range.[0m
[0;31m    default: useradd warning: barman's uid 426 outside of the UID_MIN 1000 and UID_MAX 60000 range.[0m
[0;32m    default: Rocky Linux 10 - BaseOS                          13 MB/s |  18 MB     00:01[0m
[0;32m    default: Rocky Linux 10 - AppStream                      6.7 MB/s | 2.1 MB     00:00[0m
[0;32m    default: Rocky Linux 10 - Extras                          25 kB/s | 5.1 kB     00:00[0m
[0;32m    default: pgdg-redhat-repo-latest.noarch.rpm              283 kB/s |  13 kB     00:00[0m
[0;32m    default: Dependencies resolved.[0m
[0;32m    default: ================================================================================[0m
[0;32m    default:  Package                Architecture Version           Repository          Size[0m
[0;32m    default: ================================================================================[0m
[0;32m    default: Installing:[0m
[0;32m    default:  pgdg-redhat-repo       noarch       42.0-56PGDG       @commandline        13 k[0m
[0;32m    default: [0m
[0;32m    default: Transaction Summary[0m
[0;32m    default: ================================================================================[0m
[0;32m    default: Install  1 Package[0m
[0;32m    default: [0m
[0;32m    default: Total size: 13 k[0m
[0;32m    default: Installed size: 17 k[0m
[0;32m    default: Downloading Packages:[0m
[0;32m    default: Running transaction check[0m
[0;32m    default: Transaction check succeeded.[0m
[0;32m    default: Running transaction test[0m
[0;32m    default: Transaction test succeeded.[0m
[0;32m    default: Running transaction[0m
[0;32m    default:   Preparing        :                                                        1/1[0m
[0;32m    default:   Installing       : pgdg-redhat-repo-42.0-56PGDG.noarch                    1/1[0m
[0;32m    default: [0m
[0;32m    default: Installed:[0m
[0;32m    default:   pgdg-redhat-repo-42.0-56PGDG.noarch[0m
[0;32m    default: [0m
[0;32m    default: Complete![0m
[0;31m    default: Importing GPG key 0x08B40D20:[0m
[0;31m    default:  Userid     : "PostgreSQL RPM Repository <pgsql-pkg-yum@lists.postgresql.org>"[0m
[0;31m    default:  Fingerprint: D4BF 08AE 67A0 B4C7 A1DB CCD2 40BC A2B4 08B4 0D20[0m
[0;31m    default:  From       : /etc/pki/rpm-gpg/PGDG-RPM-GPG-KEY-RHEL[0m
[0;31m    default: Importing GPG key 0x08B40D20:[0m
[0;31m    default:  Userid     : "PostgreSQL RPM Repository <pgsql-pkg-yum@lists.postgresql.org>"[0m
[0;31m    default:  Fingerprint: D4BF 08AE 67A0 B4C7 A1DB CCD2 40BC A2B4 08B4 0D20[0m
[0;31m    default:  From       : /etc/pki/rpm-gpg/PGDG-RPM-GPG-KEY-RHEL[0m
[0;31m    default: Importing GPG key 0x08B40D20:[0m
[0;31m    default:  Userid     : "PostgreSQL RPM Repository <pgsql-pkg-yum@lists.postgresql.org>"[0m
[0;31m    default:  Fingerprint: D4BF 08AE 67A0 B4C7 A1DB CCD2 40BC A2B4 08B4 0D20[0m
[0;31m    default:  From       : /etc/pki/rpm-gpg/PGDG-RPM-GPG-KEY-RHEL[0m
[0;31m    default: Importing GPG key 0x08B40D20:[0m
[0;31m    default:  Userid     : "PostgreSQL RPM Repository <pgsql-pkg-yum@lists.postgresql.org>"[0m
[0;31m    default:  Fingerprint: D4BF 08AE 67A0 B4C7 A1DB CCD2 40BC A2B4 08B4 0D20[0m
[0;31m    default:  From       : /etc/pki/rpm-gpg/PGDG-RPM-GPG-KEY-RHEL[0m
[0;31m    default: Importing GPG key 0x08B40D20:[0m
[0;31m    default:  Userid     : "PostgreSQL RPM Repository <pgsql-pkg-yum@lists.postgresql.org>"[0m
[0;31m    default:  Fingerprint: D4BF 08AE 67A0 B4C7 A1DB CCD2 40BC A2B4 08B4 0D20[0m
[0;31m    default:  From       : /etc/pki/rpm-gpg/PGDG-RPM-GPG-KEY-RHEL[0m
[0;31m    default: Importing GPG key 0x08B40D20:[0m
[0;31m    default:  Userid     : "PostgreSQL RPM Repository <pgsql-pkg-yum@lists.postgresql.org>"[0m
[0;31m    default:  Fingerprint: D4BF 08AE 67A0 B4C7 A1DB CCD2 40BC A2B4 08B4 0D20[0m
[0;31m    default:  From       : /etc/pki/rpm-gpg/PGDG-RPM-GPG-KEY-RHEL[0m
[0;31m    default: Unable to resolve argument postgresql[0m
[0;31m    default: Error: Problems in request:[0m
[0;31m    default: missing groups or modules: postgresql[0m
[0;32m    default: Last metadata expiration check: 0:00:01 ago on Wed 24 Sep 2025 05:37:45 PM CEST.[0m
[0;32m    default: Dependencies resolved.[0m
[0;32m    default: ================================================================================[0m
[0;32m    default:  Package                  Arch     Version                    Repository   Size[0m
[0;32m    default: ================================================================================[0m
[0;32m    default: Installing:[0m
[0;32m    default:  postgresql17-contrib     x86_64   17.6-1PGDG.rhel10          pgdg17      731 k[0m
[0;32m    default: Installing dependencies:[0m
[0;32m    default:  perl-AutoLoader          noarch   5.74-512.2.el10_0          appstream    21 k[0m
[0;32m    default:  perl-B                   x86_64   1.89-512.2.el10_0          appstream   180 k[0m
[0;32m    default:  perl-Carp                noarch   1.54-511.el10              appstream    29 k[0m
[0;32m    default:  perl-Class-Struct        noarch   0.68-512.2.el10_0          appstream    22 k[0m
[0;32m    default:  perl-Data-Dumper         x86_64   2.189-512.el10             appstream    56 k[0m
[0;32m    default:  perl-Digest              noarch   1.20-511.el10              appstream    25 k[0m
[0;32m    default:  perl-Digest-MD5          x86_64   2.59-6.el10                appstream    36 k[0m
[0;32m    default:  perl-DynaLoader          x86_64   1.56-512.2.el10_0          appstream    26 k[0m
[0;32m    default:  perl-Encode              x86_64   4:3.21-511.el10            appstream   1.1 M[0m
[0;32m    default:  perl-Errno               x86_64   1.38-512.2.el10_0          appstream    15 k[0m
[0;32m    default:  perl-Exporter            noarch   5.78-511.el10              appstream    31 k[0m
[0;32m    default:  perl-Fcntl               x86_64   1.18-512.2.el10_0          appstream    30 k[0m
[0;32m    default:  perl-File-Basename       noarch   2.86-512.2.el10_0          appstream    17 k[0m
[0;32m    default:  perl-File-Path           noarch   2.18-511.el10              appstream    35 k[0m
[0;32m    default:  perl-File-Temp           noarch   1:0.231.100-512.el10       appstream    59 k[0m
[0;32m    default:  perl-File-stat           noarch   1.14-512.2.el10_0          appstream    17 k[0m
[0;32m    default:  perl-FileHandle          noarch   2.05-512.2.el10_0          appstream    15 k[0m
[0;32m    default:  perl-Getopt-Long         noarch   1:2.58-3.el10              appstream    64 k[0m
[0;32m    default:  perl-Getopt-Std          noarch   1.14-512.2.el10_0          appstream    15 k[0m
[0;32m    default:  perl-HTTP-Tiny           noarch   0.088-512.el10             appstream    56 k[0m
[0;32m    default:  perl-IO                  x86_64   1.55-512.2.el10_0          appstream    83 k[0m
[0;32m    default:  perl-IO-Socket-IP        noarch   0.42-512.el10              appstream    42 k[0m
[0;32m    default:  perl-IO-Socket-SSL       noarch   2.085-3.el10               appstream   229 k[0m
[0;32m    default:  perl-IPC-Open3           noarch   1.22-512.2.el10_0          appstream    22 k[0m
[0;32m    default:  perl-MIME-Base64         x86_64   3.16-511.el10              appstream    30 k[0m
[0;32m    default:  perl-Mozilla-CA          noarch   20231213-5.el10            appstream    14 k[0m
[0;32m    default:  perl-Net-SSLeay          x86_64   1.94-7.el10                appstream   382 k[0m
[0;32m    default:  perl-POSIX               x86_64   2.20-512.2.el10_0          appstream    96 k[0m
[0;32m    default:  perl-PathTools           x86_64   3.91-512.el10              appstream    88 k[0m
[0;32m    default:  perl-Pod-Escapes         noarch   1:1.07-511.el10            appstream    20 k[0m
[0;32m    default:  perl-Pod-Perldoc         noarch   3.28.01-512.el10           appstream    87 k[0m
[0;32m    default:  perl-Pod-Simple          noarch   1:3.45-511.el10            appstream   221 k[0m
[0;32m    default:  perl-Pod-Usage           noarch   4:2.03-511.el10            appstream    40 k[0m
[0;32m    default:  perl-Scalar-List-Utils   x86_64   5:1.63-511.el10            appstream    73 k[0m
[0;32m    default:  perl-SelectSaver         noarch   1.02-512.2.el10_0          appstream    11 k[0m
[0;32m    default:  perl-Socket              x86_64   4:2.038-511.el10           appstream    55 k[0m
[0;32m    default:  perl-Storable            x86_64   1:3.32-511.el10            appstream    98 k[0m
[0;32m    default:  perl-Symbol              noarch   1.09-512.2.el10_0          appstream    14 k[0m
[0;32m    default:  perl-Term-ANSIColor      noarch   5.01-512.el10              appstream    48 k[0m
[0;32m    default:  perl-Term-Cap            noarch   1.18-511.el10              appstream    22 k[0m
[0;32m    default:  perl-Text-ParseWords     noarch   3.31-511.el10              appstream    16 k[0m
[0;32m    default:  perl-Text-Tabs+Wrap      noarch   2024.001-511.el10          appstream    22 k[0m
[0;32m    default:  perl-Time-Local          noarch   2:1.350-511.el10           appstream    34 k[0m
[0;32m    default:  perl-URI                 noarch   5.27-3.el10                appstream   136 k[0m
[0;32m    default:  perl-base                noarch   2.27-512.2.el10_0          appstream    16 k[0m
[0;32m    default:  perl-constant            noarch   1.33-512.el10              appstream    23 k[0m
[0;32m    default:  perl-if                  noarch   0.61.000-512.2.el10_0      appstream    14 k[0m
[0;32m    default:  perl-interpreter         x86_64   4:5.40.2-512.2.el10_0      appstream    72 k[0m
[0;32m    default:  perl-libnet              noarch   3.15-512.el10              appstream   130 k[0m
[0;32m    default:  perl-libs                x86_64   4:5.40.2-512.2.el10_0      appstream   2.4 M[0m
[0;32m    default:  perl-locale              noarch   1.12-512.2.el10_0          appstream    13 k[0m
[0;32m    default:  perl-mro                 x86_64   1.29-512.2.el10_0          appstream    30 k[0m
[0;32m    default:  perl-overload            noarch   1.37-512.2.el10_0          appstream    45 k[0m
[0;32m    default:  perl-overloading         noarch   0.02-512.2.el10_0          appstream    13 k[0m
[0;32m    default:  perl-parent              noarch   1:0.241-512.el10           appstream    15 k[0m
[0;32m    default:  perl-podlators           noarch   1:5.01-511.el10            appstream   126 k[0m
[0;32m    default:  perl-vars                noarch   1.05-512.2.el10_0          appstream    13 k[0m
[0;32m    default:  postgresql17             x86_64   17.6-1PGDG.rhel10          pgdg17      1.9 M[0m
[0;32m    default:  postgresql17-libs        x86_64   17.6-1PGDG.rhel10          pgdg17      345 k[0m
[0;32m    default:  postgresql17-server      x86_64   17.6-1PGDG.rhel10          pgdg17      7.0 M[0m
[0;32m    default: Installing weak dependencies:[0m
[0;32m    default:  perl-NDBM_File           x86_64   1.17-512.2.el10_0          appstream    22 k[0m
[0;32m    default: [0m
[0;32m    default: Transaction Summary[0m
[0;32m    default: ================================================================================[0m
[0;32m    default: Install  62 Packages[0m
[0;32m    default: [0m
[0;32m    default: Total download size: 17 M[0m
[0;32m    default: Installed size: 66 M[0m
[0;32m    default: Downloading Packages:[0m
[0;32m    default: (1/62): postgresql17-libs-17.6-1PGDG.rhel10.x86 2.5 MB/s | 345 kB     00:00[0m
[0;32m    default: (2/62): postgresql17-17.6-1PGDG.rhel10.x86_64.r 9.2 MB/s | 1.9 MB     00:00[0m
[0;32m    default: (3/62): postgresql17-contrib-17.6-1PGDG.rhel10. 1.9 MB/s | 731 kB     00:00[0m
[0;32m    default: (4/62): perl-AutoLoader-5.74-512.2.el10_0.noarc  85 kB/s |  21 kB     00:00[0m
[0;32m    default: (5/62): perl-Carp-1.54-511.el10.noarch.rpm      1.3 MB/s |  29 kB     00:00[0m
[0;32m    default: (6/62): perl-B-1.89-512.2.el10_0.x86_64.rpm     1.5 MB/s | 180 kB     00:00[0m
[0;32m    default: (7/62): perl-Class-Struct-0.68-512.2.el10_0.noa 478 kB/s |  22 kB     00:00[0m
[0;32m    default: (8/62): perl-Data-Dumper-2.189-512.el10.x86_64. 1.5 MB/s |  56 kB     00:00[0m
[0;32m    default: (9/62): postgresql17-server-17.6-1PGDG.rhel10.x  14 MB/s | 7.0 MB     00:00[0m
[0;32m    default: (10/62): perl-Digest-1.20-511.el10.noarch.rpm   197 kB/s |  25 kB     00:00[0m
[0;32m    default: (11/62): perl-Digest-MD5-2.59-6.el10.x86_64.rpm 291 kB/s |  36 kB     00:00[0m
[0;32m    default: (12/62): perl-DynaLoader-1.56-512.2.el10_0.x86_ 2.9 MB/s |  26 kB     00:00[0m
[0;32m    default: (13/62): perl-Exporter-5.78-511.el10.noarch.rpm 3.4 MB/s |  31 kB     00:00[0m
[0;32m    default: (14/62): perl-Fcntl-1.18-512.2.el10_0.x86_64.rp 3.0 MB/s |  30 kB     00:00[0m
[0;32m    default: (15/62): perl-Errno-1.38-512.2.el10_0.x86_64.rp 520 kB/s |  15 kB     00:00[0m
[0;32m    default: (16/62): perl-File-Basename-2.86-512.2.el10_0.n 2.0 MB/s |  17 kB     00:00[0m
[0;32m    default: (17/62): perl-File-Path-2.18-511.el10.noarch.rp 2.2 MB/s |  35 kB     00:00[0m
[0;32m    default: (18/62): perl-File-Temp-0.231.100-512.el10.noar 3.8 MB/s |  59 kB     00:00[0m
[0;32m    default: (19/62): perl-File-stat-1.14-512.2.el10_0.noarc 2.0 MB/s |  17 kB     00:00[0m
[0;32m    default: (20/62): perl-FileHandle-2.05-512.2.el10_0.noar 1.7 MB/s |  15 kB     00:00[0m
[0;32m    default: (21/62): perl-Getopt-Long-2.58-3.el10.noarch.rp 5.5 MB/s |  64 kB     00:00[0m
[0;32m    default: (22/62): perl-Getopt-Std-1.14-512.2.el10_0.noar 1.5 MB/s |  15 kB     00:00[0m
[0;32m    default: (23/62): perl-Encode-3.21-511.el10.x86_64.rpm    13 MB/s | 1.1 MB     00:00[0m
[0;32m    default: (24/62): perl-HTTP-Tiny-0.088-512.el10.noarch.r 3.1 MB/s |  56 kB     00:00[0m
[0;32m    default: (25/62): perl-IO-1.55-512.2.el10_0.x86_64.rpm   4.6 MB/s |  83 kB     00:00[0m
[0;32m    default: (26/62): perl-IO-Socket-IP-0.42-512.el10.noarch 4.6 MB/s |  42 kB     00:00[0m
[0;32m    default: (27/62): perl-IPC-Open3-1.22-512.2.el10_0.noarc 143 kB/s |  22 kB     00:00[0m
[0;32m    default: (28/62): perl-MIME-Base64-3.16-511.el10.x86_64. 198 kB/s |  30 kB     00:00[0m
[0;32m    default: (29/62): perl-IO-Socket-SSL-2.085-3.el10.noarch 1.0 MB/s | 229 kB     00:00[0m
[0;32m    default: (30/62): perl-Mozilla-CA-20231213-5.el10.noarch 201 kB/s |  14 kB     00:00[0m
[0;32m    default: (31/62): perl-NDBM_File-1.17-512.2.el10_0.x86_6 330 kB/s |  22 kB     00:00[0m
[0;32m    default: (32/62): perl-POSIX-2.20-512.2.el10_0.x86_64.rp 5.7 MB/s |  96 kB     00:00[0m
[0;32m    default: (33/62): perl-PathTools-3.91-512.el10.x86_64.rp 4.5 MB/s |  88 kB     00:00[0m
[0;32m    default: (34/62): perl-Pod-Escapes-1.07-511.el10.noarch. 2.1 MB/s |  20 kB     00:00[0m
[0;32m    default: (35/62): perl-Pod-Perldoc-3.28.01-512.el10.noar 7.7 MB/s |  87 kB     00:00[0m
[0;32m    default: (36/62): perl-Pod-Usage-2.03-511.el10.noarch.rp 3.1 MB/s |  40 kB     00:00[0m
[0;32m    default: (37/62): perl-Pod-Simple-3.45-511.el10.noarch.r 9.4 MB/s | 221 kB     00:00[0m
[0;32m    default: (38/62): perl-Scalar-List-Utils-1.63-511.el10.x 6.4 MB/s |  73 kB     00:00[0m
[0;32m    default: (39/62): perl-SelectSaver-1.02-512.2.el10_0.noa 391 kB/s |  11 kB     00:00[0m
[0;32m    default: (40/62): perl-Net-SSLeay-1.94-7.el10.x86_64.rpm 4.1 MB/s | 382 kB     00:00[0m
[0;32m    default: (41/62): perl-Socket-2.038-511.el10.x86_64.rpm  1.8 MB/s |  55 kB     00:00[0m
[0;32m    default: (42/62): perl-Storable-3.32-511.el10.x86_64.rpm 6.7 MB/s |  98 kB     00:00[0m
[0;32m    default: (43/62): perl-Symbol-1.09-512.2.el10_0.noarch.r 1.5 MB/s |  14 kB     00:00[0m
[0;32m    default: (44/62): perl-Term-ANSIColor-5.01-512.el10.noar 4.2 MB/s |  48 kB     00:00[0m
[0;32m    default: (45/62): perl-Term-Cap-1.18-511.el10.noarch.rpm 2.5 MB/s |  22 kB     00:00[0m
[0;32m    default: (46/62): perl-Text-ParseWords-3.31-511.el10.noa 1.7 MB/s |  16 kB     00:00[0m
[0;32m    default: (47/62): perl-Text-Tabs+Wrap-2024.001-511.el10. 2.2 MB/s |  22 kB     00:00[0m
[0;32m    default: (48/62): perl-Time-Local-1.350-511.el10.noarch. 4.2 MB/s |  34 kB     00:00[0m
[0;32m    default: (49/62): perl-URI-5.27-3.el10.noarch.rpm         10 MB/s | 136 kB     00:00[0m
[0;32m    default: (50/62): perl-base-2.27-512.2.el10_0.noarch.rpm 1.2 MB/s |  16 kB     00:00[0m
[0;32m    default: (51/62): perl-constant-1.33-512.el10.noarch.rpm 2.1 MB/s |  23 kB     00:00[0m
[0;32m    default: (52/62): perl-if-0.61.000-512.2.el10_0.noarch.r 1.6 MB/s |  14 kB     00:00[0m
[0;32m    default: (53/62): perl-interpreter-5.40.2-512.2.el10_0.x 6.4 MB/s |  72 kB     00:00[0m
[0;32m    default: (54/62): perl-libnet-3.15-512.el10.noarch.rpm   7.8 MB/s | 130 kB     00:00[0m
[0;32m    default: (55/62): perl-locale-1.12-512.2.el10_0.noarch.r 1.7 MB/s |  13 kB     00:00[0m
[0;32m    default: (56/62): perl-mro-1.29-512.2.el10_0.x86_64.rpm  3.5 MB/s |  30 kB     00:00[0m
[0;32m    default: (57/62): perl-overload-1.37-512.2.el10_0.noarch 1.5 MB/s |  45 kB     00:00[0m
[0;32m    default: (58/62): perl-overloading-0.02-512.2.el10_0.noa 496 kB/s |  13 kB     00:00[0m
[0;32m    default: (59/62): perl-parent-0.241-512.el10.noarch.rpm  1.6 MB/s |  15 kB     00:00[0m
[0;32m    default: (60/62): perl-podlators-5.01-511.el10.noarch.rp 8.8 MB/s | 126 kB     00:00[0m
[0;32m    default: (61/62): perl-vars-1.05-512.2.el10_0.noarch.rpm 1.2 MB/s |  13 kB     00:00[0m
[0;32m    default: (62/62): perl-libs-5.40.2-512.2.el10_0.x86_64.r  15 MB/s | 2.4 MB     00:00[0m
[0;32m    default: --------------------------------------------------------------------------------[0m
[0;32m    default: Total                                            12 MB/s |  17 MB     00:01[0m
[0;32m    default: PostgreSQL 17 for RHEL / Rocky / AlmaLinux 10 - 2.4 MB/s | 2.4 kB     00:00[0m
[0;31m    default: Importing GPG key 0x08B40D20:[0m
[0;31m    default:  Userid     : "PostgreSQL RPM Repository <pgsql-pkg-yum@lists.postgresql.org>"[0m
[0;31m    default:  Fingerprint: D4BF 08AE 67A0 B4C7 A1DB CCD2 40BC A2B4 08B4 0D20[0m
[0;31m    default:  From       : /etc/pki/rpm-gpg/PGDG-RPM-GPG-KEY-RHEL[0m
[0;32m    default: Key imported successfully[0m
[0;32m    default: Rocky Linux 10 - AppStream                      1.6 MB/s | 1.6 kB     00:00[0m
[0;31m    default: Importing GPG key 0x6FEDFC85:[0m
[0;31m    default:  Userid     : "Release Engineering (Rocky Linux 10) <releng@rockylinux.org>"[0m
[0;31m    default:  Fingerprint: FC22 6859 C086 0BF0 DDB9 5B08 5B10 6C73 6FED FC85[0m
[0;31m    default:  From       : /etc/pki/rpm-gpg/RPM-GPG-KEY-Rocky-10[0m
[0;32m    default: Key imported successfully[0m
[0;32m    default: Running transaction check[0m
[0;32m    default: Transaction check succeeded.[0m
[0;32m    default: Running transaction test[0m
[0;32m    default: Transaction test succeeded.[0m
[0;32m    default: Running transaction[0m
[0;32m    default:   Preparing        :                                                        1/1[0m
[0;32m    default:   Installing       : postgresql17-libs-17.6-1PGDG.rhel10.x86_64            1/62[0m
[0;32m    default:   Running scriptlet: postgresql17-libs-17.6-1PGDG.rhel10.x86_64            1/62[0m
[0;32m    default:   Installing       : postgresql17-17.6-1PGDG.rhel10.x86_64                 2/62[0m
[0;32m    default:   Running scriptlet: postgresql17-17.6-1PGDG.rhel10.x86_64                 2/62[0m
[0;32m    default:   Running scriptlet: postgresql17-server-17.6-1PGDG.rhel10.x86_64          3/62[0m
[0;32m    default:   Installing       : postgresql17-server-17.6-1PGDG.rhel10.x86_64          3/62[0m
[0;32m    default:   Running scriptlet: postgresql17-server-17.6-1PGDG.rhel10.x86_64          3/62[0m
[0;32m    default:   Installing       : perl-Digest-1.20-511.el10.noarch                      4/62[0m
[0;32m    default:   Installing       : perl-Digest-MD5-2.59-6.el10.x86_64                    5/62[0m
[0;32m    default:   Installing       : perl-B-1.89-512.2.el10_0.x86_64                       6/62[0m
[0;32m    default:   Installing       : perl-FileHandle-2.05-512.2.el10_0.noarch              7/62[0m
[0;32m    default:   Installing       : perl-Data-Dumper-2.189-512.el10.x86_64                8/62[0m
[0;32m    default:   Installing       : perl-libnet-3.15-512.el10.noarch                      9/62[0m
[0;32m    default:   Installing       : perl-URI-5.27-3.el10.noarch                          10/62[0m
[0;32m    default:   Installing       : perl-AutoLoader-5.74-512.2.el10_0.noarch             11/62[0m
[0;32m    default:   Installing       : perl-Text-Tabs+Wrap-2024.001-511.el10.noarch         12/62[0m
[0;32m    default:   Installing       : perl-Mozilla-CA-20231213-5.el10.noarch               13/62[0m
[0;32m    default:   Installing       : perl-if-0.61.000-512.2.el10_0.noarch                 14/62[0m
[0;32m    default:   Installing       : perl-locale-1.12-512.2.el10_0.noarch                 15/62[0m
[0;32m    default:   Installing       : perl-IO-Socket-IP-0.42-512.el10.noarch               16/62[0m
[0;32m    default:   Installing       : perl-Time-Local-2:1.350-511.el10.noarch              17/62[0m
[0;32m    default:   Installing       : perl-File-Path-2.18-511.el10.noarch                  18/62[0m
[0;32m    default:   Installing       : perl-Pod-Escapes-1:1.07-511.el10.noarch              19/62[0m
[0;32m    default:   Installing       : perl-IO-Socket-SSL-2.085-3.el10.noarch               20/62[0m
[0;32m    default:   Installing       : perl-Net-SSLeay-1.94-7.el10.x86_64                   21/62[0m
[0;32m    default:   Installing       : perl-Class-Struct-0.68-512.2.el10_0.noarch           22/62[0m
[0;32m    default:   Installing       : perl-Term-ANSIColor-5.01-512.el10.noarch             23/62[0m
[0;32m    default:   Installing       : perl-POSIX-2.20-512.2.el10_0.x86_64                  24/62[0m
[0;32m    default:   Installing       : perl-IPC-Open3-1.22-512.2.el10_0.noarch              25/62[0m
[0;32m    default:   Installing       : perl-File-Temp-1:0.231.100-512.el10.noarch           26/62[0m
[0;32m    default:   Installing       : perl-Term-Cap-1.18-511.el10.noarch                   27/62[0m
[0;32m    default:   Installing       : perl-Pod-Simple-1:3.45-511.el10.noarch               28/62[0m
[0;32m    default:   Installing       : perl-HTTP-Tiny-0.088-512.el10.noarch                 29/62[0m
[0;32m    default:   Installing       : perl-Socket-4:2.038-511.el10.x86_64                  30/62[0m
[0;32m    default:   Installing       : perl-SelectSaver-1.02-512.2.el10_0.noarch            31/62[0m
[0;32m    default:   Installing       : perl-Symbol-1.09-512.2.el10_0.noarch                 32/62[0m
[0;32m    default:   Installing       : perl-File-stat-1.14-512.2.el10_0.noarch              33/62[0m
[0;32m    default:   Installing       : perl-podlators-1:5.01-511.el10.noarch                34/62[0m
[0;32m    default:   Installing       : perl-Pod-Perldoc-3.28.01-512.el10.noarch             35/62[0m
[0;32m    default:   Installing       : perl-Fcntl-1.18-512.2.el10_0.x86_64                  36/62[0m
[0;32m    default:   Installing       : perl-Text-ParseWords-3.31-511.el10.noarch            37/62[0m
[0;32m    default:   Installing       : perl-base-2.27-512.2.el10_0.noarch                   38/62[0m
[0;32m    default:   Installing       : perl-mro-1.29-512.2.el10_0.x86_64                    39/62[0m
[0;32m    default:   Installing       : perl-IO-1.55-512.2.el10_0.x86_64                     40/62[0m
[0;32m    default:   Installing       : perl-overloading-0.02-512.2.el10_0.noarch            41/62[0m
[0;32m    default:   Installing       : perl-Pod-Usage-4:2.03-511.el10.noarch                42/62[0m
[0;32m    default:   Installing       : perl-Errno-1.38-512.2.el10_0.x86_64                  43/62[0m
[0;32m    default:   Installing       : perl-File-Basename-2.86-512.2.el10_0.noarch          44/62[0m
[0;32m    default:   Installing       : perl-Getopt-Std-1.14-512.2.el10_0.noarch             45/62[0m
[0;32m    default:   Installing       : perl-MIME-Base64-3.16-511.el10.x86_64                46/62[0m
[0;32m    default:   Installing       : perl-Scalar-List-Utils-5:1.63-511.el10.x86_64        47/62[0m
[0;32m    default:   Installing       : perl-constant-1.33-512.el10.noarch                   48/62[0m
[0;32m    default:   Installing       : perl-Storable-1:3.32-511.el10.x86_64                 49/62[0m
[0;32m    default:   Installing       : perl-overload-1.37-512.2.el10_0.noarch               50/62[0m
[0;32m    default:   Installing       : perl-parent-1:0.241-512.el10.noarch                  51/62[0m
[0;32m    default:   Installing       : perl-vars-1.05-512.2.el10_0.noarch                   52/62[0m
[0;32m    default:   Installing       : perl-Getopt-Long-1:2.58-3.el10.noarch                53/62[0m
[0;32m    default:   Installing       : perl-Carp-1.54-511.el10.noarch                       54/62[0m
[0;32m    default:   Installing       : perl-Exporter-5.78-511.el10.noarch                   55/62[0m
[0;32m    default:   Installing       : perl-NDBM_File-1.17-512.2.el10_0.x86_64              56/62[0m
[0;32m    default:   Installing       : perl-PathTools-3.91-512.el10.x86_64                  57/62[0m
[0;32m    default:   Installing       : perl-DynaLoader-1.56-512.2.el10_0.x86_64             58/62[0m
[0;32m    default:   Installing       : perl-Encode-4:3.21-511.el10.x86_64                   59/62[0m
[0;32m    default:   Installing       : perl-libs-4:5.40.2-512.2.el10_0.x86_64               60/62[0m
[0;32m    default:   Installing       : perl-interpreter-4:5.40.2-512.2.el10_0.x86_64        61/62[0m
[0;32m    default:   Installing       : postgresql17-contrib-17.6-1PGDG.rhel10.x86_64        62/62[0m
[0;32m    default:   Running scriptlet: postgresql17-contrib-17.6-1PGDG.rhel10.x86_64        62/62[0m
[0;32m    default: [0m
[0;32m    default: Installed:[0m
[0;32m    default:   perl-AutoLoader-5.74-512.2.el10_0.noarch[0m
[0;32m    default:   perl-B-1.89-512.2.el10_0.x86_64[0m
[0;32m    default:   perl-Carp-1.54-511.el10.noarch[0m
[0;32m    default:   perl-Class-Struct-0.68-512.2.el10_0.noarch[0m
[0;32m    default:   perl-Data-Dumper-2.189-512.el10.x86_64[0m
[0;32m    default:   perl-Digest-1.20-511.el10.noarch[0m
[0;32m    default:   perl-Digest-MD5-2.59-6.el10.x86_64[0m
[0;32m    default:   perl-DynaLoader-1.56-512.2.el10_0.x86_64[0m
[0;32m    default:   perl-Encode-4:3.21-511.el10.x86_64[0m
[0;32m    default:   perl-Errno-1.38-512.2.el10_0.x86_64[0m
[0;32m    default:   perl-Exporter-5.78-511.el10.noarch[0m
[0;32m    default:   perl-Fcntl-1.18-512.2.el10_0.x86_64[0m
[0;32m    default:   perl-File-Basename-2.86-512.2.el10_0.noarch[0m
[0;32m    default:   perl-File-Path-2.18-511.el10.noarch[0m
[0;32m    default:   perl-File-Temp-1:0.231.100-512.el10.noarch[0m
[0;32m    default:   perl-File-stat-1.14-512.2.el10_0.noarch[0m
[0;32m    default:   perl-FileHandle-2.05-512.2.el10_0.noarch[0m
[0;32m    default:   perl-Getopt-Long-1:2.58-3.el10.noarch[0m
[0;32m    default:   perl-Getopt-Std-1.14-512.2.el10_0.noarch[0m
[0;32m    default:   perl-HTTP-Tiny-0.088-512.el10.noarch[0m
[0;32m    default:   perl-IO-1.55-512.2.el10_0.x86_64[0m
[0;32m    default:   perl-IO-Socket-IP-0.42-512.el10.noarch[0m
[0;32m    default:   perl-IO-Socket-SSL-2.085-3.el10.noarch[0m
[0;32m    default:   perl-IPC-Open3-1.22-512.2.el10_0.noarch[0m
[0;32m    default:   perl-MIME-Base64-3.16-511.el10.x86_64[0m
[0;32m    default:   perl-Mozilla-CA-20231213-5.el10.noarch[0m
[0;32m    default:   perl-NDBM_File-1.17-512.2.el10_0.x86_64[0m
[0;32m    default:   perl-Net-SSLeay-1.94-7.el10.x86_64[0m
[0;32m    default:   perl-POSIX-2.20-512.2.el10_0.x86_64[0m
[0;32m    default:   perl-PathTools-3.91-512.el10.x86_64[0m
[0;32m    default:   perl-Pod-Escapes-1:1.07-511.el10.noarch[0m
[0;32m    default:   perl-Pod-Perldoc-3.28.01-512.el10.noarch[0m
[0;32m    default:   perl-Pod-Simple-1:3.45-511.el10.noarch[0m
[0;32m    default:   perl-Pod-Usage-4:2.03-511.el10.noarch[0m
[0;32m    default:   perl-Scalar-List-Utils-5:1.63-511.el10.x86_64[0m
[0;32m    default:   perl-SelectSaver-1.02-512.2.el10_0.noarch[0m
[0;32m    default:   perl-Socket-4:2.038-511.el10.x86_64[0m
[0;32m    default:   perl-Storable-1:3.32-511.el10.x86_64[0m
[0;32m    default:   perl-Symbol-1.09-512.2.el10_0.noarch[0m
[0;32m    default:   perl-Term-ANSIColor-5.01-512.el10.noarch[0m
[0;32m    default:   perl-Term-Cap-1.18-511.el10.noarch[0m
[0;32m    default:   perl-Text-ParseWords-3.31-511.el10.noarch[0m
[0;32m    default:   perl-Text-Tabs+Wrap-2024.001-511.el10.noarch[0m
[0;32m    default:   perl-Time-Local-2:1.350-511.el10.noarch[0m
[0;32m    default:   perl-URI-5.27-3.el10.noarch[0m
[0;32m    default:   perl-base-2.27-512.2.el10_0.noarch[0m
[0;32m    default:   perl-constant-1.33-512.el10.noarch[0m
[0;32m    default:   perl-if-0.61.000-512.2.el10_0.noarch[0m
[0;32m    default:   perl-interpreter-4:5.40.2-512.2.el10_0.x86_64[0m
[0;32m    default:   perl-libnet-3.15-512.el10.noarch[0m
[0;32m    default:   perl-libs-4:5.40.2-512.2.el10_0.x86_64[0m
[0;32m    default:   perl-locale-1.12-512.2.el10_0.noarch[0m
[0;32m    default:   perl-mro-1.29-512.2.el10_0.x86_64[0m
[0;32m    default:   perl-overload-1.37-512.2.el10_0.noarch[0m
[0;32m    default:   perl-overloading-0.02-512.2.el10_0.noarch[0m
[0;32m    default:   perl-parent-1:0.241-512.el10.noarch[0m
[0;32m    default:   perl-podlators-1:5.01-511.el10.noarch[0m
[0;32m    default:   perl-vars-1.05-512.2.el10_0.noarch[0m
[0;32m    default:   postgresql17-17.6-1PGDG.rhel10.x86_64[0m
[0;32m    default:   postgresql17-contrib-17.6-1PGDG.rhel10.x86_64[0m
[0;32m    default:   postgresql17-libs-17.6-1PGDG.rhel10.x86_64[0m
[0;32m    default:   postgresql17-server-17.6-1PGDG.rhel10.x86_64[0m
[0;32m    default: [0m
[0;32m    default: Complete![0m
[0;32m    default: Last metadata expiration check: 0:00:12 ago on Wed 24 Sep 2025 05:37:45 PM CEST.[0m
[0;32m    default: Package postgresql17-server-17.6-1PGDG.rhel10.x86_64 is already installed.[0m
[0;32m    default: Dependencies resolved.[0m
[0;32m    default: Nothing to do.[0m
[0;32m    default: Complete![0m
[0;31m    default: Created symlink '/etc/systemd/system/multi-user.target.wants/postgresql-17.service' → '/usr/lib/systemd/system/postgresql-17.service'.[0m
[0;32m    default: Last metadata expiration check: 0:00:14 ago on Wed 24 Sep 2025 05:37:45 PM CEST.[0m
[0;32m    default: Dependencies resolved.[0m
[0;32m    default: ================================================================================[0m
[0;32m    default:  Package          Architecture  Version                     Repository     Size[0m
[0;32m    default: ================================================================================[0m
[0;32m    default: Installing:[0m
[0;32m    default:  pg_tle_17        x86_64        1.5.1-1PGDG.rhel10          pgdg17         65 k[0m
[0;32m    default: [0m
[0;32m    default: Transaction Summary[0m
[0;32m    default: ================================================================================[0m
[0;32m    default: Install  1 Package[0m
[0;32m    default: [0m
[0;32m    default: Total download size: 65 k[0m
[0;32m    default: Installed size: 204 k[0m
[0;32m    default: Downloading Packages:[0m
[0;32m    default: pg_tle_17-1.5.1-1PGDG.rhel10.x86_64.rpm         955 kB/s |  65 kB     00:00[0m
[0;32m    default: --------------------------------------------------------------------------------[0m
[0;32m    default: Total                                           915 kB/s |  65 kB     00:00[0m
[0;32m    default: Running transaction check[0m
[0;32m    default: Transaction check succeeded.[0m
[0;32m    default: Running transaction test[0m
[0;32m    default: Transaction test succeeded.[0m
[0;32m    default: Running transaction[0m
[0;32m    default:   Preparing        :                                                        1/1[0m
[0;32m    default:   Installing       : pg_tle_17-1.5.1-1PGDG.rhel10.x86_64                    1/1[0m
[0;32m    default:   Running scriptlet: pg_tle_17-1.5.1-1PGDG.rhel10.x86_64                    1/1[0m
[0;32m    default: [0m
[0;32m    default: Installed:[0m
[0;32m    default:   pg_tle_17-1.5.1-1PGDG.rhel10.x86_64[0m
[0;32m    default: [0m
[0;32m    default: Complete![0m
[0;32m    default: exit[0m
[0;32m    default: START postgres.sh[0m
[0;32m    default: The files belonging to this database system will be owned by user "postgres".[0m
[0;32m    default: This user must also own the server process.[0m
[0;32m    default: [0m
[0;32m    default: The database cluster will be initialized with locale "en_US.UTF-8".[0m
[0;32m    default: The default text search configuration will be set to "english".[0m
[0;32m    default: [0m
[0;32m    default: Data page checksums are disabled.[0m
[0;32m    default: [0m
[0;32m    default: fixing permissions on existing directory /pgdata/data ... ok[0m
[0;32m    default: creating subdirectories ... ok[0m
[0;32m    default: selecting dynamic shared memory implementation ... posix[0m
[0;32m    default: selecting default "max_connections" ... 100[0m
[0;32m    default: selecting default "shared_buffers" ... 128MB[0m
[0;32m    default: selecting default time zone ... Europe/Amsterdam[0m
[0;32m    default: creating configuration files ... ok[0m
[0;32m    default: running bootstrap script ... ok[0m
[0;32m    default: performing post-bootstrap initialization ... ok[0m
[0;32m    default: syncing data to disk ... ok[0m
[0;32m    default: [0m
[0;32m    default: Success. You can now start the database server using:[0m
[0;32m    default: [0m
[0;32m    default:     /usr/pgsql-17/bin/pg_ctl -D /pgdata/data -l logfile start[0m
[0;32m    default: [0m
[0;32m    default: >>>> START postgres2.sh <<<<<[0m
[0;32m    default: >>>>[0m
[0;32m    default: [0m
[0;32m    default:                                         NO RULES / VANILLA POSTGRES[0m
[0;32m    default: [0m
[0;32m    default: <<<<<[0m
[0;32m    default: waiting for server to start.... done[0m
[0;32m    default: server started[0m
[0;32m    default: CREATE DATABASE[0m
[0;32m    default: CREATE ROLE[0m
[0;32m    default: GRANT[0m
[0;32m    default: You are connected to database "pwdb" as user "test" on host "127.0.0.1" at port "5432".[0m
[0;32m    default: CREATE ROLE[0m
[0;32m    default: GRANT[0m
[0;32m    default: You are connected to database "pwdb" as user "test1" on host "127.0.0.1" at port "5432".[0m
[0;32m    default: CREATE ROLE[0m
[0;32m    default: >>>> NO RULES / VANILLA POSTGRES test <<<<<[0m
[0;32m    default: >>> begin testscript >>>[0m
[0;32m    default: ==> Different passwords that ideally should fail, or not enough[0m
[0;32m    default: ALTER USER user1 PASSWORD '123';[0m
[0;32m    default: ALTER ROLE[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER USER user1 PASSWORD '123456789';[0m
[0;32m    default: ALTER ROLE[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER USER user1 PASSWORD 'user1';[0m
[0;32m    default: ALTER ROLE[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER USER user1 PASSWORD 'user1user1';[0m
[0;32m    default: ALTER ROLE[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER USER user1 PASSWORD 'Hello123456789';[0m
[0;32m    default: ALTER ROLE[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER USER user1 PASSWORD 'Hello123456';[0m
[0;32m    default: ALTER ROLE[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER USER user1 PASSWORD 'He123456';[0m
[0;32m    default: ALTER ROLE[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER USER user1 PASSWORD 'He123456789';[0m
[0;32m    default: ALTER ROLE[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER USER user1 PASSWORD 'He@123456789';[0m
[0;32m    default: ALTER ROLE[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER USER user1 PASSWORD 'Hello@123456';[0m
[0;32m    default: ALTER ROLE[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: <<< end testscript <<<[0m
[0;32m    default: >>>>[0m
[0;32m    default: [0m
[0;32m    default:                                         DEFAULT POSTGRES + POSTGRESQL SETTINGS[0m
[0;32m    default: [0m
[0;32m    default: <<<<<[0m
[0;32m    default: waiting for server to shut down.... done[0m
[0;32m    default: server stopped[0m
[0;32m    default: waiting for server to start....2025-09-24 17:38:54.162 CEST [18816] LOG:  redirecting log output to logging collector process[0m
[0;32m    default: 2025-09-24 17:38:54.162 CEST [18816] HINT:  Future log output will appear in directory "log".[0m
[0;32m    default:  done[0m
[0;32m    default: server started[0m
[0;32m    default: You are connected to database "pwdb" as user "test" on host "127.0.0.1" at port "5432".[0m
[0;32m    default: >>>> DEFAULT POSTGRES + POSTGRESQL SETTINGS test <<<<<[0m
[0;32m    default: >>> begin testscript >>>[0m
[0;32m    default: ==> Different passwords that ideally should fail, or not enough[0m
[0;32m    default: ALTER USER user1 PASSWORD '123';[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;31m    default: psql:/tmp/testscript.sql:3: ERROR:  password is too short[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER USER user1 PASSWORD '123456789';[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;31m    default: psql:/tmp/testscript.sql:5: ERROR:  password must contain both letters and nonletters[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER USER user1 PASSWORD 'user1';[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;31m    default: psql:/tmp/testscript.sql:7: ERROR:  password is too short[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER USER user1 PASSWORD 'user1user1';[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;31m    default: psql:/tmp/testscript.sql:9: ERROR:  password must not contain user name[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER USER user1 PASSWORD 'Hello123456789';[0m
[0;32m    default: ALTER ROLE[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER USER user1 PASSWORD 'Hello123456';[0m
[0;32m    default: ALTER ROLE[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER USER user1 PASSWORD 'He123456';[0m
[0;32m    default: ALTER ROLE[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER USER user1 PASSWORD 'He123456789';[0m
[0;32m    default: ALTER ROLE[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER USER user1 PASSWORD 'He@123456789';[0m
[0;32m    default: ALTER ROLE[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER USER user1 PASSWORD 'Hello@123456';[0m
[0;32m    default: ALTER ROLE[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: <<< end testscript <<<[0m
[0;32m    default: >>>>[0m
[0;32m    default: [0m
[0;32m    default:                                         DSS VERSION 0.1[0m
[0;32m    default: [0m
[0;32m    default: <<<<<[0m
[0;32m    default: ALTER DATABASE[0m
[0;32m    default: waiting for server to shut down.... done[0m
[0;32m    default: server stopped[0m
[0;32m    default: waiting for server to start....2025-09-24 17:39:09.487 CEST [18836] LOG:  redirecting log output to logging collector process[0m
[0;32m    default: 2025-09-24 17:39:09.487 CEST [18836] HINT:  Future log output will appear in directory "log".[0m
[0;32m    default:  done[0m
[0;32m    default: server started[0m
[0;32m    default: You are connected to database "pwdb" as user "test" on host "127.0.0.1" at port "5432".[0m
[0;32m    default: You are now connected to database "pwdb" as user "postgres".[0m
[0;32m    default: CREATE SCHEMA[0m
[0;32m    default: CREATE EXTENSION[0m
[0;32m    default: ALTER DATABASE[0m
[0;32m    default: GRANT ROLE[0m
[0;32m    default: ALTER SYSTEM[0m
[0;32m    default:  pg_reload_conf[0m
[0;32m    default: ----------------[0m
[0;32m    default:  t[0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER SYSTEM[0m
[0;32m    default:  pg_reload_conf[0m
[0;32m    default: ----------------[0m
[0;32m    default:  t[0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default:  install_extension[0m
[0;32m    default: -------------------[0m
[0;32m    default:  t[0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: CREATE EXTENSION[0m
[0;32m    default: '>>>> DSS VERSION 0.1  test <<<<<'[0m
[0;32m    default: >>> begin testscript 1 >>>[0m
[0;32m    default: ==> Different passwords that need to fail DSS 1<<<[0m
[0;32m    default: ALTER USER user1 PASSWORD 'Short@1';[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;31m    default: psql:/tmp/testscript1.sql:3: ERROR:  Password validation failed for user user1: Password must be at least 12 characters long.[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER USER user1 PASSWORD 'nocapitals@1';[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;31m    default: psql:/tmp/testscript1.sql:5: ERROR:  Password validation failed for user user1: Password must contain at least one uppercase letter.[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER USER user1 PASSWORD 'NotEnoughNumbers_@';[0m
[0;31m    default: psql:/tmp/testscript1.sql:7: ERROR:  Password validation failed for user user1: Password must contain at least one number.[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER USER user1 PASSWORD 'NOLOWERCASE@1';[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;31m    default: psql:/tmp/testscript1.sql:9: ERROR:  Password validation failed for user user1: Password must contain at least one lowercase letter.[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER USER user1 PASSWORD 'NoSpecialChars1';[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;31m    default: psql:/tmp/testscript1.sql:11: ERROR:  Password validation failed for user user1: Password must contain at least one special character.[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER USER user1 PASSWORD 'verywrong';[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;31m    default: psql:/tmp/testscript1.sql:13: ERROR:  Password validation failed for user user1: Password must be at least 12 characters long. Password must contain at least one uppercase letter. Password must contain at least one number. Password must contain at least one special character.[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: [0m
[0;32m    default: ==> This one should work:[0m
[0;32m    default: ALTER USER user1 PASSWORD 'V@l1dP4ssW0rd!';[0m
[0;32m    default: ALTER ROLE[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: <<< end testscript 1 <<<[0m
[0;32m    default: >>>>[0m
[0;32m    default: [0m
[0;32m    default:                                         DSS VERSION 0.2[0m
[0;32m    default: [0m
[0;32m    default: <<<<<[0m
[0;32m    default: waiting for server to shut down.... done[0m
[0;32m    default: server stopped[0m
[0;32m    default: waiting for server to start....2025-09-24 17:39:22.025 CEST [18867] LOG:  redirecting log output to logging collector process[0m
[0;32m    default: 2025-09-24 17:39:22.025 CEST [18867] HINT:  Future log output will appear in directory "log".[0m
[0;32m    default:  done[0m
[0;32m    default: server started[0m
[0;32m    default: You are connected to database "pwdb" as user "test" on host "127.0.0.1" at port "5432".[0m
[0;32m    default: You are now connected to database "pwdb" as user "postgres".[0m
[0;32m    default: ALTER SYSTEM[0m
[0;32m    default:  pg_reload_conf[0m
[0;32m    default: ----------------[0m
[0;32m    default:  t[0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER SYSTEM[0m
[0;32m    default:  pg_reload_conf[0m
[0;32m    default: ----------------[0m
[0;32m    default:  t[0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default:  install_update_path[0m
[0;32m    default: ---------------------[0m
[0;32m    default:  t[0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER EXTENSION[0m
[0;32m    default: ALTER DATABASE[0m
[0;32m    default: GRANT ROLE[0m
[0;32m    default: >>>> DSS VERSION 0.2 test <<<<<[0m
[0;32m    default: >>> begin testscript 2 >>>[0m
[0;32m    default: [0m
[0;32m    default: [0m
[0;32m    default: ==> FOR DSS 2 ; require group[0m
[0;32m    default: ==> should succeed:[0m
[0;32m    default: CREATE ROLE user2 WITH PASSWORD 'InitialP@ssw0rd1!';[0m
[0;32m    default: CREATE ROLE[0m
[0;32m    default: ==> should fail not assigned:[0m
[0;32m    default: ALTER ROLE user2 WITH PASSWORD 'NewL0ngP@ssw0rd2!';[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;31m    default: psql:/tmp/testscript2.sql:11: ERROR:  Password change not allowed for user user2: User must be assigned to one of the defined roles (pci_admin_users, pci_app_users, pci_standard_users).[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: GRANT pci_standard_users TO user2;[0m
[0;32m    default: GRANT ROLE[0m
[0;32m    default: ==> should succeed 12 chars has 13 but fails:[0m
[0;32m    default: ALTER ROLE user2 WITH PASSWORD 'NewP@ssw0rd2!';[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;31m    default: psql:/tmp/testscript2.sql:15: ERROR:  Password validation failed for user user2: Password must be at least 15 characters long.[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ==> it works with 17 chars:[0m
[0;32m    default: ALTER ROLE user2 WITH PASSWORD 'NewL0ngP@ssw0rd2!';[0m
[0;32m    default: ALTER ROLE[0m
[0;32m    default: DROP ROLE user2;[0m
[0;32m    default: DROP ROLE[0m
[0;32m    default: [0m
[0;32m    default: [0m
[0;32m    default: <<< end testscript 2 <<<[0m
[0;32m    default: >>>>[0m
[0;32m    default: [0m
[0;32m    default:                                         DSS VERSION 0.3 password reuse[0m
[0;32m    default: [0m
[0;32m    default: <<<<<[0m
[0;32m    default: You are connected to database "pwdb" as user "test" on host "127.0.0.1" at port "5432".[0m
[0;32m    default: CREATE EXTENSION[0m
[0;32m    default:  install_update_path[0m
[0;32m    default: ---------------------[0m
[0;32m    default:  t[0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER EXTENSION[0m
[0;32m    default: >>>> DSS VERSION 3 password reuse test <<<<<[0m
[0;32m    default: >>> begin testscript 3 >>>[0m
[0;32m    default: >>> FOR DSS 3 ; password reuse<<<<[0m
[0;32m    default: ==> first 4 should succeed:[0m
[0;32m    default: CREATE ROLE user3 WITH PASSWORD 'StrongP@ssw0rd1!';[0m
[0;32m    default: CREATE ROLE[0m
[0;32m    default: GRANT pci_standard_users TO user3;[0m
[0;32m    default: GRANT ROLE[0m
[0;32m    default: ALTER ROLE user3 WITH PASSWORD 'V3ryStr0ngP@ssw0rd2!';[0m
[0;32m    default: ALTER ROLE[0m
[0;32m    default: ALTER ROLE user3 WITH PASSWORD 'Sup3rDuperP@ssw0rd3!';[0m
[0;32m    default: ALTER ROLE[0m
[0;32m    default: ALTER ROLE user3 WITH PASSWORD 'Ult1mateP@ssw0rd4!';[0m
[0;32m    default: ALTER ROLE[0m
[0;32m    default: ==> should fail, reused:[0m
[0;32m    default: ALTER ROLE user3 WITH PASSWORD 'StrongP@ssw0rd1!';[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;31m    default: psql:/tmp/testscript3.sql:10: ERROR:  Password validation failed for user user3: Password cannot be one of the previous 4 passwords.[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ==> should fail, reused:[0m
[0;32m    default: ALTER ROLE user3 WITH PASSWORD 'V3ryStr0ngP@ssw0rd2!';[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;31m    default: psql:/tmp/testscript3.sql:13: ERROR:  Password validation failed for user user3: Password cannot be one of the previous 4 passwords.[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ==> should succeed,new password:[0m
[0;32m    default: ALTER ROLE user3 WITH PASSWORD 'TotallyN3wP@ssw0rd5!';[0m
[0;32m    default: ALTER ROLE[0m
[0;32m    default: DROP ROLE user3;[0m
[0;32m    default: DROP ROLE[0m
[0;32m    default: DELETE FROM password_check.password_history where username='user3';[0m
[0;32m    default: DELETE 5[0m
[0;32m    default: <<< end testscript 3 <<<[0m
[0;32m    default: >>>>[0m
[0;32m    default: [0m
[0;32m    default:                                         DSS VERSION 0.4 password timeout[0m
[0;32m    default: [0m
[0;32m    default: <<<<<[0m
[0;32m    default: waiting for server to shut down.... done[0m
[0;32m    default: server stopped[0m
[0;32m    default: waiting for server to start....2025-09-24 17:39:31.866 CEST [18913] LOG:  redirecting log output to logging collector process[0m
[0;32m    default: 2025-09-24 17:39:31.866 CEST [18913] HINT:  Future log output will appear in directory "log".[0m
[0;32m    default:  done[0m
[0;32m    default: server started[0m
[0;32m    default: You are connected to database "pwdb" as user "test" on host "127.0.0.1" at port "5432".[0m
[0;32m    default:  install_update_path[0m
[0;32m    default: ---------------------[0m
[0;32m    default:  t[0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER EXTENSION[0m
[0;32m    default: waiting for server to shut down.... done[0m
[0;32m    default: server stopped[0m
[0;32m    default: waiting for server to start....2025-09-24 17:39:37.199 CEST [18932] LOG:  redirecting log output to logging collector process[0m
[0;32m    default: 2025-09-24 17:39:37.199 CEST [18932] HINT:  Future log output will appear in directory "log".[0m
[0;32m    default:  done[0m
[0;32m    default: server started[0m
[0;32m    default: You are connected to database "pwdb" as user "test" on host "127.0.0.1" at port "5432".[0m
[0;32m    default: >>>> DSS VERSION 0.4 password timeout test <<<<<[0m
[0;32m    default: >>> begin testscript 0.4 SQL >>>[0m
[0;32m    default: You are now connected to database "pwdb" as user "postgres".[0m
[0;32m    default: CREATE ROLE pci_new_users WITH LOGIN;[0m
[0;32m    default: CREATE ROLE[0m
[0;32m    default: GRANT CONNECT ON DATABASE pwdb TO pci_new_users;[0m
[0;32m    default: GRANT[0m
[0;32m    default: ALTER ROLE pci_admin_users WITH LOGIN;[0m
[0;32m    default: ALTER ROLE[0m
[0;32m    default: GRANT CONNECT ON DATABASE pwdb TO pci_admin_users;[0m
[0;32m    default: GRANT[0m
[0;32m    default: ALTER USER pci_admin_users WITH SUPERUSER;[0m
[0;32m    default: ALTER ROLE[0m
[0;32m    default: ALTER ROLE pci_standard_users WITH LOGIN;[0m
[0;32m    default: ALTER ROLE[0m
[0;32m    default: GRANT CONNECT ON DATABASE pwdb TO pci_standard_users;[0m
[0;32m    default: GRANT[0m
[0;32m    default: ALTER ROLE pci_app_users WITH LOGIN;[0m
[0;32m    default: ALTER ROLE[0m
[0;32m    default: GRANT CONNECT ON DATABASE pwdb TO pci_app_users;[0m
[0;32m    default: GRANT[0m
[0;32m    default: UPDATE password_check.profiles SET max_validity_interval = '1 day' WHERE role = 'pci_standard_users';[0m
[0;32m    default: UPDATE 1[0m
[0;32m    default: UPDATE password_check.profiles SET max_validity_interval = '1 year' WHERE role = 'pci_app_users';[0m
[0;32m    default: UPDATE 1[0m
[0;32m    default: [0m
[0;32m    default: ==> should fail: too long in the future:[0m
[0;32m    default: DO[0m
[0;32m    default: $do$[0m
[0;32m    default: BEGIN[0m
[0;32m    default:   EXECUTE format($$CREATE USER test_Too_Ahead_user WITH PASSWORD 'CompliantPassw0rd€' VALID UNTIL %L$$, NOW() + INTERVAL '30 days');[0m
[0;32m    default: END;[0m
[0;32m    default: $do$;[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;31m    default: psql:/tmp/testscript4.sql:43: ERROR:  Password validation failed for user test_too_ahead_user: Account validity date cannot be more than 00:15:00 in the future for this role.[0m
[0;31m    default: CONTEXT:  SQL statement "CREATE USER test_Too_Ahead_user WITH PASSWORD 'CompliantPassw0rd€' VALID UNTIL '2025-10-24 17:39:42.325431+02'"[0m
[0;31m    default: PL/pgSQL function inline_code_block line 3 at EXECUTE[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: [0m
[0;32m    default: ==> should fail: no valid until null[0m
[0;32m    default: CREATE ROLE test_null_user WITH PASSWORD 'NullPassw0rd^';[0m
[0;31m    default: psql:/tmp/testscript4.sql:47: ERROR:  Password validation failed for user test_null_user: New user password must have a "VALID UNTIL" date. "VALID UNTIL NULL" is not allowed.[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: [0m
[0;32m    default: ==> should work like this: (10 minutes):[0m
[0;32m    default: DO[0m
[0;32m    default: $do$[0m
[0;32m    default: BEGIN[0m
[0;32m    default:   EXECUTE format($$CREATE USER compliant_user WITH PASSWORD 'CompliantPassw0rd€' VALID UNTIL %L$$, NOW() + INTERVAL '10 minutes');[0m
[0;32m    default: END;[0m
[0;32m    default: $do$;[0m
[0;32m    default: DO[0m
[0;32m    default: [0m
[0;32m    default: [0m
[0;32m    default: GRANT pci_standard_users TO compliant_user;[0m
[0;32m    default: GRANT ROLE[0m
[0;32m    default: GRANT ALL ON DATABASE pwdb TO compliant_user;[0m
[0;32m    default: GRANT[0m
[0;32m    default: >> password_check.profiles <<[0m
[0;32m    default: SELECT * FROM password_check.profiles;[0m
[0;32m    default:         role        | min_length | require_special_char | require_uppercase | require_lowercase | require_digit | history_limit | max_validity_interval[0m
[0;32m    default: --------------------+------------+----------------------+-------------------+-------------------+---------------+---------------+-----------------------[0m
[0;32m    default:  pci_new_users      |         12 | t                    | t                 | t                 | t             |             4 | 00:15:00[0m
[0;32m    default:  pci_admin_users    |         15 | t                    | t                 | t                 | t             |             4 | 30 days[0m
[0;32m    default:  pci_standard_users |         12 | t                    | t                 | t                 | t             |             4 | 1 day[0m
[0;32m    default:  pci_app_users      |         15 | t                    | t                 | t                 | t             |             4 | 1 year[0m
[0;32m    default: (4 rows)[0m
[0;32m    default: [0m
[0;32m    default: UPDATE password_check.profiles SET max_validity_interval = '1 day' WHERE role = 'pci_standard_users';[0m
[0;32m    default: UPDATE 1[0m
[0;32m    default: UPDATE password_check.profiles SET max_validity_interval = '1 year' WHERE role = 'pci_app_users';[0m
[0;32m    default: UPDATE 1[0m
[0;32m    default: DO[0m
[0;32m    default: $do$[0m
[0;32m    default: BEGIN[0m
[0;32m    default:   EXECUTE format($$CREATE USER working_user WITH PASSWORD 'G00dL0NgPassw0rd€' VALID UNTIL %L$$, NOW() + INTERVAL '10 minutes');[0m
[0;32m    default: END;[0m
[0;32m    default: $do$;[0m
[0;32m    default: DO[0m
[0;32m    default: GRANT pci_admin_users TO working_user;[0m
[0;32m    default: GRANT ROLE[0m
[0;32m    default: GRANT ALL ON DATABASE pwdb TO working_user;[0m
[0;32m    default: GRANT[0m
[0;32m    default: DO[0m
[0;32m    default: $do$[0m
[0;32m    default: BEGIN[0m
[0;32m    default:   EXECUTE format($$ALTER ROLE working_user VALID UNTIL %L$$, NOW() + INTERVAL '29 days');[0m
[0;32m    default: END;[0m
[0;32m    default: $do$;[0m
[0;32m    default: DO[0m
[0;32m    default: SELECT username, to_char(change_timestamp, 'YYYY-MM-DD HH24:MI:SS') as change_timestamp, to_char(valid_until, 'YYYY-MM-DD HH24:MI:SS') as valid_until, to_char( now(), 'YYYY-MM-DD HH24:MI:SS') as NOW FROM password_check.password_history WHERE USERNAME like '%orking_user';[0m
[0;32m    default:    username   |  change_timestamp   |     valid_until     |         now[0m
[0;32m    default: --------------+---------------------+---------------------+---------------------[0m
[0;32m    default:  working_user | 2025-09-24 17:39:44 | 2025-09-24 17:54:44 | 2025-09-24 17:39:44[0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: DO[0m
[0;32m    default: $do$[0m
[0;32m    default: BEGIN[0m
[0;32m    default:   EXECUTE format($$CREATE USER expiring_user WITH PASSWORD 'ExpiringPassw0rd€' VALID UNTIL %L$$, NOW() + INTERVAL '1 minute');[0m
[0;32m    default: END;[0m
[0;32m    default: $do$;[0m
[0;32m    default: DO[0m
[0;32m    default: GRANT pci_standard_users TO expiring_user;[0m
[0;32m    default: GRANT ROLE[0m
[0;32m    default: GRANT ALL ON DATABASE pwdb TO expiring_user;[0m
[0;32m    default: GRANT[0m
[0;32m    default: <<< end testscript 0.4 SQL <<<[0m
[0;32m    default: >>> start testscript 0.4 shell part >>>[0m
[0;32m    default: ==> should work:[0m
[0;32m    default: You are connected to database "pwdb" as user "working_user" on host "127.0.0.1" at port "5432".[0m
[0;32m    default: [0m
[0;32m    default: [0m
[0;32m    default: ==> should work(expiring_user before expiry):[0m
[0;32m    default: You are connected to database "pwdb" as user "expiring_user" on host "127.0.0.1" at port "5432".[0m
[0;32m    default: >>>> sleep 1 minute for expiry test <<<<[0m
[0;32m    default: ==> should NOT work , (expiring_user password no longer valid):[0m
[0;31m    default: psql: error: connection to server at "127.0.0.1", port 5432 failed: FATAL:  password authentication failed for user "expiring_user"[0m
[0;32m    default: ==> change password and reset expiry time:[0m
[0;32m    default: ALTER USER expiring_user WITH PASSWORD 'NewValidPassw0rd€';[0m
[0;32m    default: ALTER ROLE[0m
[0;32m    default: DO[0m
[0;32m    default: $do$[0m
[0;32m    default: BEGIN[0m
[0;32m    default:   EXECUTE format($$ALTER USER expiring_user VALID UNTIL %L$$, NOW() + INTERVAL '12 hours');[0m
[0;32m    default: END;[0m
[0;32m    default: $do$;[0m
[0;32m    default: DO[0m
[0;32m    default: [0m
[0;32m    default: ==> should work again: (expiring_user new password):[0m
[0;32m    default: You are connected to database "pwdb" as user "expiring_user" on host "127.0.0.1" at port "5432".[0m
[0;32m    default: [0m
[0;32m    default: [0m
[0;32m    default:     username    |  change_timestamp   |     valid_until     |         now[0m
[0;32m    default: ----------------+---------------------+---------------------+---------------------[0m
[0;32m    default:  compliant_user | 2025-09-24 17:39:44 | 2025-09-24 17:54:44 | 2025-09-24 17:40:47[0m
[0;32m    default:  working_user   | 2025-09-24 17:39:44 | 2025-09-24 17:54:44 | 2025-09-24 17:40:47[0m
[0;32m    default:  expiring_user  | 2025-09-24 17:39:44 | 2025-09-24 17:54:44 | 2025-09-24 17:40:47[0m
[0;32m    default:  expiring_user  | 2025-09-24 17:40:46 | 2025-09-25 17:40:46 | 2025-09-24 17:40:47[0m
[0;32m    default: (4 rows)[0m
[0;32m    default: [0m
[0;32m    default: <<< end testscript 0.4 shell part <<<[0m
[0;32m    default: >>>>[0m
[0;32m    default: [0m
[0;32m    default:                                         DSS VERSION 0.5 fail after multiple wrong passwords[0m
[0;32m    default: [0m
[0;32m    default: <<<<[0m
[0;32m    default:  install_update_path[0m
[0;32m    default: ---------------------[0m
[0;32m    default:  t[0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER EXTENSION[0m
[0;32m    default: >>>> DSS VERSION 0.5 test <<<<<[0m
[0;32m    default: You are now connected to database "pwdb" as user "postgres".[0m
[0;32m    default: >>> begin testscript 0.5 SQL >>>[0m
[0;32m    default: DO[0m
[0;32m    default: $do$[0m
[0;32m    default: BEGIN[0m
[0;32m    default:    EXECUTE format($$CREATE USER test_badpw_user WITH PASSWORD 'WorkingP@ssw0rd!' VALID UNTIL  %L$$, now() + interval '10 minutes');[0m
[0;32m    default: END;[0m
[0;32m    default: $do$;[0m
[0;32m    default: DO[0m
[0;32m    default: GRANT pci_standard_users TO test_badpw_user;[0m
[0;32m    default: GRANT ROLE[0m
[0;32m    default: GRANT ALL ON DATABASE pwdb TO test_badpw_user;[0m
[0;32m    default: GRANT[0m
[0;32m    default: DO[0m
[0;32m    default: $do$[0m
[0;32m    default: BEGIN[0m
[0;32m    default:   EXECUTE format($$ALTER ROLE test_badpw_user VALID UNTIL %L$$, NOW() + INTERVAL '29 days');[0m
[0;32m    default: END;[0m
[0;32m    default: $do$;[0m
[0;32m    default: DO[0m
[0;32m    default: DO[0m
[0;32m    default: $do$[0m
[0;32m    default: BEGIN[0m
[0;32m    default:    EXECUTE format($$CREATE USER test_user WITH PASSWORD 'WorkingP@ssw0rd!' VALID UNTIL  %L$$, now() + interval '10 minutes');[0m
[0;32m    default: END;[0m
[0;32m    default: $do$;[0m
[0;32m    default: DO[0m
[0;32m    default: GRANT pci_standard_users TO test_user;[0m
[0;32m    default: GRANT ROLE[0m
[0;32m    default: GRANT ALL ON DATABASE pwdb TO test_user;[0m
[0;32m    default: GRANT[0m
[0;32m    default: DO[0m
[0;32m    default: $do$[0m
[0;32m    default: BEGIN[0m
[0;32m    default:   EXECUTE format($$ALTER ROLE test_user VALID UNTIL %L$$, NOW() + INTERVAL '29 days');[0m
[0;32m    default: END;[0m
[0;32m    default: $do$;[0m
[0;32m    default: DO[0m
[0;32m    default: <<< end testscript 0.5 SQL <<<[0m
[0;32m    default: >>>> begin testscript 0.5 shell part >>>>[0m
[0;32m    default: >>>> begin testscript 0.5 testcase 1>>>>[0m
[0;32m    default: ==> Should work:[0m
[0;32m    default: You are connected to database "pwdb" as user "test_badpw_user" on host "127.0.0.1" at port "5432".[0m
[0;32m    default: ==> Try bad password 11 times should be locked after 10[0m
[0;32m    default: ==> Should fail 5 times (=5):[0m
[0;31m    default: psql: error: connection to server at "127.0.0.1", port 5432 failed: FATAL:  password authentication failed for user "test_badpw_user"[0m
[0;31m    default: psql: error: connection to server at "127.0.0.1", port 5432 failed: FATAL:  password authentication failed for user "test_badpw_user"[0m
[0;31m    default: psql: error: connection to server at "127.0.0.1", port 5432 failed: FATAL:  password authentication failed for user "test_badpw_user"[0m
[0;31m    default: psql: error: connection to server at "127.0.0.1", port 5432 failed: FATAL:  password authentication failed for user "test_badpw_user"[0m
[0;31m    default: psql: error: connection to server at "127.0.0.1", port 5432 failed: FATAL:  password authentication failed for user "test_badpw_user"[0m
[0;32m    default: [0m
[0;32m    default: ==> See failed_attempts go up:[0m
[0;32m    default: select username, failed_attempts, to_char(last_successful_login , 'YYYY-MM-DD HH24:MI:SS') as last_successful_login , to_char(last_activity, 'YYYY-MM-DD HH24:MI:SS') as last_activity from password_check.user_login_activity where username='test_badpw_user';[0m
[0;32m    default:     username     | failed_attempts | last_successful_login |    last_activity[0m
[0;32m    default: -----------------+-----------------+-----------------------+---------------------[0m
[0;32m    default:  test_badpw_user |               5 | 2025-09-24 17:40:47   | 2025-09-24 17:40:49[0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: [0m
[0;32m    default: ==> Should fail 4 more times (=9):[0m
[0;31m    default: psql: error: connection to server at "127.0.0.1", port 5432 failed: FATAL:  password authentication failed for user "test_badpw_user"[0m
[0;31m    default: psql: error: connection to server at "127.0.0.1", port 5432 failed: FATAL:  password authentication failed for user "test_badpw_user"[0m
[0;31m    default: psql: error: connection to server at "127.0.0.1", port 5432 failed: FATAL:  password authentication failed for user "test_badpw_user"[0m
[0;31m    default: psql: error: connection to server at "127.0.0.1", port 5432 failed: FATAL:  password authentication failed for user "test_badpw_user"[0m
[0;32m    default: [0m
[0;32m    default: ==> See failed_attempts go up:[0m
[0;32m    default: select username, failed_attempts, to_char(last_successful_login , 'YYYY-MM-DD HH24:MI:SS') as last_successful_login , to_char(last_activity, 'YYYY-MM-DD HH24:MI:SS') as last_activity from password_check.user_login_activity where username='test_badpw_user';[0m
[0;32m    default:     username     | failed_attempts | last_successful_login |    last_activity[0m
[0;32m    default: -----------------+-----------------+-----------------------+---------------------[0m
[0;32m    default:  test_badpw_user |               9 | 2025-09-24 17:40:47   | 2025-09-24 17:40:49[0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ==> Should fail 1 more time (=10):[0m
[0;31m    default: psql: error: connection to server at "127.0.0.1", port 5432 failed: FATAL:  password authentication failed for user "test_badpw_user"[0m
[0;32m    default: [0m
[0;32m    default: ==> OOPS!:[0m
[0;32m    default: [0m
[0;31m    default: psql: error: connection to server at "127.0.0.1", port 5432 failed: FATAL:  Account test_badpw_user has been locked due to too many failed authentication attempts. Try again after 2025-09-24 18:10:49.204529+02.[0m
[0;32m    default: [0m
[0;32m    default: ==> Should be locked now even with correct password:[0m
[0;31m    default: psql: error: connection to server at "127.0.0.1", port 5432 failed: FATAL:  Account test_badpw_user has been locked due to too many failed authentication attempts. Try again after 2025-09-24 18:10:49.204529+02.[0m
[0;32m    default: [0m
[0;32m    default: select username, to_char(locked_until , 'YYYY-MM-DD HH24:MI:SS') as locked_until, locked_by from password_check.locked_accounts;[0m
[0;32m    default:     username     |    locked_until     | locked_by[0m
[0;32m    default: -----------------+---------------------+-----------[0m
[0;32m    default:  test_badpw_user | 2025-09-24 18:10:49 | SYSTEM[0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: [0m
[0;32m    default: ==> Remove from locked accounts:[0m
[0;32m    default: delete from password_check.locked_accounts where username='test_badpw_user';[0m
[0;32m    default: DELETE 1[0m
[0;32m    default: [0m
[0;32m    default: ==> and try again, should work:[0m
[0;32m    default: You are connected to database "pwdb" as user "test_badpw_user" on host "127.0.0.1" at port "5432".[0m
[0;32m    default: [0m
[0;32m    default: [0m
[0;32m    default: >>>> begin testscript 0.5 testcase 2 After a successful login, are the correct profile policies selected? >>>>[0m
[0;32m    default: select * from password_check.v_role_members_parameters where username='test_user';[0m
[0;32m    default:  username  |        role        | max_validity_interval | lockout_threshold | lockout_duration_minutes | inactive_threshold[0m
[0;32m    default: -----------+--------------------+-----------------------+-------------------+--------------------------+--------------------[0m
[0;32m    default:  test_user | pci_standard_users | 1 day                 |                10 |                       30 | 90 days[0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: <<<< end testscript 0.5 shell part <<<<[0m
[0;32m    default: >>>>[0m
[0;32m    default: [0m
[0;32m    default:                                         DSS VERSION 0.6 dictionary passwords[0m
[0;32m    default: [0m
[0;32m    default: <<<<[0m
[0;32m    default:  install_update_path[0m
[0;32m    default: ---------------------[0m
[0;32m    default:  t[0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: ALTER EXTENSION[0m
[0;32m    default: >>>> DSS VERSION 0.5 test <<<<<[0m
[0;32m    default: [0m
[0;32m    default: >>> begin testscript 0.6 SQL >>>[0m
[0;32m    default: [0m
[0;32m    default: ==> Add bad password "Wachtw0ordJ€":[0m
[0;32m    default: SELECT password_check.add_bad_password('Wachtw0ordJ€');[0m
[0;32m    default:  add_bad_password[0m
[0;32m    default: ------------------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: [0m
[0;32m    default: ==> should fail for many reasons:[0m
[0;32m    default: CREATE USER test_bad_pw_user WITH PASSWORD 'Wachtw0ordJ€';[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;31m    default: psql:/tmp/testscript6.sql:7: ERROR:  Password validation failed for user test_bad_pw_user: Password is too common, known to be insecure, or a default value. Please choose a different password.New user password must have a "VALID UNTIL" date. "VALID UNTIL NULL" is not allowed.[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: [0m
[0;32m    default: ==> Now see if we can get it too just not work because the easy password Wachtw0ordJ€:[0m
[0;32m    default: DO[0m
[0;32m    default: $do$[0m
[0;32m    default: BEGIN[0m
[0;32m    default:   EXECUTE format($$CREATE USER test_bad_pw_user WITH PASSWORD 'Wachtw0ordJ€' VALID UNTIL %L$$, NOW() + INTERVAL '10 minutes');[0m
[0;32m    default: END;[0m
[0;32m    default: $do$;[0m
[0;32m    default: GRANT pci_admin_users TO test_bad_pw_user;[0m
[0;31m    default: psql:/tmp/testscript6.sql:18: ERROR:  Password validation failed for user test_bad_pw_user: Password is too common, known to be insecure, or a default value. Please choose a different password.[0m
[0;31m    default: CONTEXT:  SQL statement "CREATE USER test_bad_pw_user WITH PASSWORD 'Wachtw0ordJ€' VALID UNTIL '2025-09-24 17:50:52.474097+02'"[0m
[0;31m    default: PL/pgSQL function inline_code_block line 3 at EXECUTE[0m
[0;31m    default: psql:/tmp/testscript6.sql:20: ERROR:  role "test_bad_pw_user" does not exist[0m
[0;32m    default: GRANT ALL ON DATABASE pwdb TO test_bad_pw_user;[0m
[0;32m    default: DO[0m
[0;32m    default: $do$[0m
[0;32m    default: BEGIN[0m
[0;32m    default:   EXECUTE format($$ALTER ROLE test_bad_pw_user VALID UNTIL %L$$, NOW() + INTERVAL '29 days');[0m
[0;32m    default: END;[0m
[0;32m    default: $do$;[0m
[0;31m    default: psql:/tmp/testscript6.sql:21: ERROR:  role "test_bad_pw_user" does not exist[0m
[0;32m    default: SELECT pg_sleep(1);[0m
[0;31m    default: psql:/tmp/testscript6.sql:27: ERROR:  role "test_bad_pw_user" does not exist[0m
[0;31m    default: CONTEXT:  SQL statement "ALTER ROLE test_bad_pw_user VALID UNTIL '2025-10-23 17:40:52.49772+02'"[0m
[0;31m    default: PL/pgSQL function inline_code_block line 3 at EXECUTE[0m
[0;32m    default:  pg_sleep[0m
[0;32m    default: ----------[0m
[0;32m    default: [0m
[0;32m    default: (1 row)[0m
[0;32m    default: [0m
[0;32m    default: <<< end testscript 0.6 SQL <<<[0m
[0;32m    default: >>> begin testscript 0.6 shell >>>[0m
[0;32m    default: [0m
[0;32m    default: ==> Should fail contains "wachtwoordJ€123"[0m
[0;31m    default: psql: error: connection to server at "127.0.0.1", port 5432 failed: FATAL:  password authentication failed for user "test_bad_pw_user"[0m
[0;32m    default: <<< end testscript 0.6 shell <<<[0m

Script done on 2025-09-24 17:40:53+02:00 [COMMAND_EXIT_CODE="0"]
